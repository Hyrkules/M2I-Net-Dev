<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock popup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> 
</head>

<body>

<div class="container mt-5">
    <h2>Product Stock Management</h2>
    <div class="row">
        <div class="col-md-8">
            <div id="product-list" class="list-group">
                <!-- Products will be added here -->
            </div>
        </div>
        <div class="col-md-4">
            <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">
                View Stock Summary
            </button>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Stock Summary</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="stock-summary">
            <!-- Stock summary will be displayed here -->
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<script>
    // Product data
    let products = [
        { id: 1, name: "Laptop", quantity: 15 },
        { id: 2, name: "Mouse", quantity: 25 },
        { id: 3, name: "Keyboard", quantity: 10 },
        { id: 4, name: "Monitor", quantity: 8 },
        { id: 5, name: "Headphones", quantity: 20 }
    ];

    // Function to render product list
    function renderProductList() {
        const productList = document.getElementById('product-list');
        productList.innerHTML = '';

        products.forEach(product => {
            const productItem = document.createElement('div');
            productItem.className = 'list-group-item d-flex justify-content-between align-items-center';
            productItem.innerHTML = `
                <div>
                    <strong>${product.name}</strong>
                    <span class="badge bg-primary rounded-pill ms-2" id="qty-${product.id}">${product.quantity}</span>
                </div>
                <div>
                    <button class="btn btn-sm btn-success me-1" onclick="changeQuantity(${product.id}, -1)">-</button>
                    <button class="btn btn-sm btn-success" onclick="changeQuantity(${product.id}, 1)">+</button>
                </div>
            `;
            productList.appendChild(productItem);
        });
    }

    // Function to change product quantity
    function changeQuantity(productId, change) {
        const product = products.find(p => p.id === productId);
        if (product) {
            product.quantity = Math.max(0, product.quantity + change);
            document.getElementById(`qty-${productId}`).textContent = product.quantity;
        }
    }

    // Function to update stock summary in modal
    function updateStockSummary() {
        const stockSummary = document.getElementById('stock-summary');
        stockSummary.innerHTML = '<h5>Current Stock Levels:</h5>';

        const summaryList = document.createElement('ul');
        summaryList.className = 'list-group list-group-flush';

        products.forEach(product => {
            const listItem = document.createElement('li');
            listItem.className = 'list-group-item d-flex justify-content-between align-items-center';
            listItem.innerHTML = `
                ${product.name}
                <span class="badge bg-primary rounded-pill">${product.quantity}</span>
            `;
            summaryList.appendChild(listItem);
        });

        stockSummary.appendChild(summaryList);
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        renderProductList();
        updateStockSummary();

        // Update stock summary when modal is shown
        const modal = document.getElementById('exampleModalCenter');
        modal.addEventListener('show.bs.modal', updateStockSummary);
    });
</script>

</body>
</html>